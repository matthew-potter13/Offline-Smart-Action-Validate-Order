function runAction(a){a.data.message="";let e=!1;return a.data.related.OrderItem.forEach(_=>{a.data.related.aforza__Inventory_Product__c.forEach(t=>{a.data.related.PricebookEntry.forEach(f=>{if(_.Product2Id===t.aforza__Product__c&&_.PricebookEntryId===f.Id){if(_.Quantity>t.aforza__Stock_Quantity__c){let r=t.aforza__Stock_Quantity__c<=0?-1*(_.Quantity+t.aforza__Stock_Quantity__c):_.Quantity-t.aforza__Stock_Quantity__c;a.data.message+=t.aforza__Stock_Quantity__c<=0?f.Name+` OUT OF STOCK
`:f.Name+" QUANTITY - "+r+`
`,_.Quantity=t.aforza__Stock_Quantity__c}e=!0}})}),a.data.related.Product2.forEach(t=>{!e&&_.Product2Id===t.Id&&t.Family==="Product"&&(a.data.message+=t.Name+` NOT STOCKED
`,_.Quantity=-1)}),e=!1}),a.data.related.OrderItem=a.data.related.OrderItem.filter(_=>_.Quantity>0),a.data.message+="Your order has been validated",a.data.message===""&&(a.data.error="An Error has occured",a.data.message=null),a}
