function runAction(a){a.data.message="";let _=!1;return a.data.related.OrderItem.forEach(e=>{a.data.related.aforza__Inventory_Product__c.forEach(t=>{a.data.related.PricebookEntry.forEach(r=>{if(e.Product2Id===t.aforza__Product__c&&e.PricebookEntryId===r.Id){if(e.Quantity>t.aforza__Stock_Quantity__c){let u=t.aforza__Stock_Quantity__c<=0?-1*(e.Quantity+t.aforza__Stock_Quantity__c):e.Quantity-t.aforza__Stock_Quantity__c;a.data.message+=t.aforza__Stock_Quantity__c<=0?r.Name+` OUT OF STOCK
`:r.Name+" QUANTITY - "+u+`
`,e.Quantity=t.aforza__Stock_Quantity__c}_=!0}})}),a.data.related.Product2.forEach(t=>{!_&&e.Product2Id===t.Id&&t.Family==="Product"&&(a.data.message+=t.Name+` NOT STOCKED
`,e.Quantity=-1)}),_=!1}),a.data.related.OrderItem=a.data.related.OrderItem.filter(e=>e.Quantity>0),a.data.message+="Your order has been validated",a.data.message===""&&(a.data.error="An Error has occured",a.data.message=null),a.data.updateDeviceData=!0,a.data.updateDeviceData.Order=!0,a.data.updateDeviceData.OrderIem=!0,a.data.reprice=!0,a}
